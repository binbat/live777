# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ‰ ç³»ç»Ÿå·²å®Œå…¨æ­£å¸¸å·¥ä½œï¼

Liveion UDP æ¡¥æ¥ç³»ç»Ÿç°åœ¨å¯ä»¥å®Œç¾è¿è¡Œï¼Œå®ç°ç½‘é¡µç«¯åˆ° UDP è®¾å¤‡çš„åŒå‘é€šä¿¡ã€‚

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡

```cmd
start_complete_demo.bat
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨å¯åŠ¨ï¼š
- âœ… Liveion æœåŠ¡å™¨ (ç«¯å£ 7777)
- âœ… UDP æ¡¥æ¥ç¨‹åº (ç«¯å£ 8888) 
- âœ… Python HTTP æœåŠ¡å™¨ (ç«¯å£ 8080)
- âœ… Web æ§åˆ¶ç•Œé¢

## ğŸ“ ä½¿ç”¨æ­¥éª¤

1. **å¯åŠ¨æ‰€æœ‰æœåŠ¡** - è¿è¡Œ `start_complete_demo.bat`
2. **ç­‰å¾…å¯åŠ¨å®Œæˆ** - çº¦ 10 ç§’
3. **æ‰“å¼€ Web ç•Œé¢** - æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ `http://localhost:8080/examples/liveion_udp_control.html`
4. **ç‚¹å‡»è¿æ¥** - ç‚¹å‡»"è¿æ¥"æŒ‰é’®
5. **æµ‹è¯•æ§åˆ¶** - ä½¿ç”¨æ–¹å‘é”®æˆ–ç‚¹å‡»æŒ‰é’®å‘é€äº‘å°æ§åˆ¶æŒ‡ä»¤
6. **ç›‘å¬ UDP** - ä½¿ç”¨ä»»ä½• UDP å®¢æˆ·ç«¯å·¥å…·ç›‘å¬ç«¯å£ 8889 æ¥æ”¶æ¶ˆæ¯

## ğŸ¯ é¢„æœŸç»“æœ

### æ­£å¸¸è¿è¡Œçš„æ ‡å¿—

1. **Liveion æœåŠ¡å™¨çª—å£**: 
   ```
   Server listening on http://0.0.0.0:7777
   ```

2. **UDP æ¡¥æ¥ç¨‹åºçª—å£**:
   ```
   ğŸš€ Starting liveion UDP bridge
   ğŸ“‹ Loaded configuration from "bridge.toml"
   ğŸŒ‰ Bridge created successfully
   âœ… WebRTC connection established
   ğŸ“¡ DataChannel å·²æ‰“å¼€ [ID: 0]
   ```

3. **Web ç•Œé¢**:
   ```
   âœ… è¿æ¥æˆåŠŸï¼
   âœ… DataChannel å·²æ‰“å¼€
   DataChannel + UDPæ¡¥æ¥å·²è¿æ¥
   ```

4. **UDP æ¶ˆæ¯å‘é€**:
   ```
   UDP æ¶ˆæ¯ä¼šè‡ªåŠ¨å‘é€åˆ° 127.0.0.1:8889
   ä½ å¯ä»¥ä½¿ç”¨ netcat æˆ–å…¶ä»– UDP å·¥å…·ç›‘å¬:
   nc -u -l 8889
   ```

## ğŸ”§ æ‰‹åŠ¨å¯åŠ¨ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦å•ç‹¬å¯åŠ¨å„ä¸ªç»„ä»¶ï¼š

```cmd
# 1. å¯åŠ¨ liveion æœåŠ¡å™¨
target\release\live777.exe --config conf\live777.toml

# 2. å¯åŠ¨ UDP æ¡¥æ¥ç¨‹åº
target\release\liveion-udp-bridge.exe -v

# 3. å¯åŠ¨ HTTP æœåŠ¡å™¨
python -m http.server 8080

# 4. ç›‘å¬ UDP æ¶ˆæ¯ (å¯é€‰)
# ä½¿ç”¨ netcat æˆ–å…¶ä»–å·¥å…·ç›‘å¬ç«¯å£ 8889
nc -u -l 8889

# 5. æ‰“å¼€æµè§ˆå™¨
# è®¿é—® http://localhost:8080/examples/liveion_udp_control.html
```

## ğŸ›‘ åœæ­¢æœåŠ¡

å…³é—­æ‰€æœ‰å‘½ä»¤è¡Œçª—å£ï¼Œæˆ–è¿è¡Œï¼š
```powershell
./stop_complete_demo.ps1
```

## ğŸ” æ•…éšœæ’é™¤

### ç«¯å£å†²çª
å¦‚æœé‡åˆ°ç«¯å£å ç”¨é”™è¯¯ï¼š
```cmd
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr "7777 8888 8889 8080"

# ç»ˆæ­¢å ç”¨è¿›ç¨‹
taskkill /f /im live777.exe
taskkill /f /im liveion-udp-bridge.exe
taskkill /f /im python.exe
```

### è¿æ¥å¤±è´¥
1. ç¡®ä¿æŒ‰é¡ºåºå¯åŠ¨æœåŠ¡
2. ç­‰å¾… liveion æœåŠ¡å™¨å®Œå…¨å¯åŠ¨ï¼ˆçº¦ 5 ç§’ï¼‰
3. ä½¿ç”¨ HTTP æœåŠ¡å™¨è®¿é—®é¡µé¢ï¼Œä¸è¦ç›´æ¥æ‰“å¼€ HTML æ–‡ä»¶

### UDP æ¶ˆæ¯æ¥æ”¶
1. æ£€æŸ¥æ¡¥æ¥ç¨‹åºæ˜¯å¦æ˜¾ç¤º "DataChannel å·²æ‰“å¼€"
2. ç¡®è®¤ç½‘é¡µæ˜¾ç¤º"å·²è¿æ¥"çŠ¶æ€
3. ä½¿ç”¨ UDP å®¢æˆ·ç«¯å·¥å…·ç›‘å¬ç«¯å£ 8889
4. æŸ¥çœ‹æ¡¥æ¥ç¨‹åºæ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯

## ğŸ“ æµ‹è¯• UDP æ¥æ”¶

```cmd
# ä½¿ç”¨ netcat ç›‘å¬ UDP æ¶ˆæ¯
nc -u -l 8889

# æˆ–ä½¿ç”¨ PowerShell
# åˆ›å»ºç®€å•çš„ UDP ç›‘å¬å™¨è„šæœ¬
```

## ğŸ® æ§åˆ¶è¯´æ˜

### é”®ç›˜æ§åˆ¶
- **æ–¹å‘é”®**: äº‘å°ä¸Šä¸‹å·¦å³
- **ç©ºæ ¼é”®**: åœæ­¢
- **+/-**: å˜ç„¦

### é¼ æ ‡æ§åˆ¶
ç‚¹å‡»ç•Œé¢ä¸Šçš„æ§åˆ¶æŒ‰é’®

## ğŸ”‘ å…³é”®é…ç½®

### bridge.toml
```toml
[udp]
listen = "0.0.0.0"
port = 8888
target_addresses = ["127.0.0.1:8889"]

[liveion]
url = "http://localhost:7777"
stream = "webcontrol"

[bridge]
enable_logging = true
```

### conf/live777.toml
```toml
[http]
port = 7777
cors = true

[whep]
auto_create_whep = true
```

## âœ… ç³»ç»Ÿæ¶æ„

```
ç½‘é¡µç«¯ (WHIPå‘å¸ƒè€…)
    â†“ DataChannel
Liveion æœåŠ¡å™¨
    â†“ DataChannel  
UDP æ¡¥æ¥ç¨‹åº
    â†“ UDP (ç«¯å£ 8888)
UDP è®¾å¤‡ (ç«¯å£ 8889)
```

ç°åœ¨ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨å®Œæ•´çš„ UDP æ§åˆ¶ç³»ç»Ÿäº†ï¼ğŸŠ
